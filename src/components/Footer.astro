<footer
  data-testid="footer"
  class="p-6 text-center text-sm text-black dark:text-white"
>
  <p>
    Copyright Â© {new Date().getFullYear()}. All rights reserved. Made by <a
      href="https://github.com/michalina-graczyk"
      target="_blank"
      rel="noopener"
      class="inline-flex min-h-[44px] items-center"
    >
      <span class="text-orange"> Michalina Graczyk</span>
    </a>
  </p>
  <p>
    Theme created by <a
      href="https://github.com/veranikabarel"
      target="_blank"
      rel="noopener"
      class="inline-flex min-h-[44px] items-center"
      ><span class="text-orange"> Veranika Kasparevych</span></a
    >
    & assets designed by
    <a
      href="https://www.freepik.com"
      target="_blank"
      rel="noopener"
      class="inline-flex min-h-[44px] items-center"
    >
      <span class="text-orange">Freepik</span>
    </a>
  </p>
  <p class="mt-2">
    <button
      id="cookie-settings"
      class="min-h-[44px] cursor-pointer text-gray-500 underline hover:text-orange"
      data-testid="cookie-settings"
    >
      Ustawienia cookies
    </button>
  </p>
</footer>

<script>
  import { withdrawConsent } from "@lib/consent";

  function initCookieSettings() {
    const button = document.getElementById("cookie-settings");
    if (!button || button.hasAttribute("data-initialized")) return;
    button.setAttribute("data-initialized", "true");

    button.addEventListener("click", () => {
      withdrawConsent();
      // Reload the page to reset analytics state and show banner
      window.location.reload();
    });
  }

  if (document.readyState !== "loading") {
    initCookieSettings();
  } else {
    document.addEventListener("DOMContentLoaded", initCookieSettings, {
      once: true,
    });
  }

  // Support Astro View Transitions
  document.addEventListener("astro:page-load", initCookieSettings);
</script>
